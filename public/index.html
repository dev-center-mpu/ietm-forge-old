<head>
  <meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1, user-scalable=no" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta charset="utf-8" />
  <title>ИЭТР</title>

  <!-- The Viewer CSS -->
  <link rel="stylesheet" href="https://developer.api.autodesk.com/modelderivative/v2/viewers/6.*/style.min.css"
    type="text/css" />

  <!-- Bootstrap -->
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
    integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">

  <link rel="stylesheet" href="https://cdn.metroui.org.ua/v4/css/metro-all.min.css" />

  <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
  <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
  <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
  <![endif]-->
  <link rel="stylesheet" href="css/main.css" />

  <!-- Developer CSS -->
  <style>
    #MyViewerDiv {
      width: 100%;
      height: 100%;
      margin: 0;
      background-color: #f0f8ff;
    }

    * {
      padding: 0;
      margin: 0;
    }

    body {
      width: 100%;
      height: 100%;
      display: grid;
      grid-template-columns: 18% 41% 41%;
      grid-template-rows: 100%;
    }

    #left {
      grid-column-start: 1;
      grid-column-end: 1;
      grid-row-start: 1;
      grid-row-end: 1;
    }

    #right {
      padding: 24px;
      grid-column-start: 3;
      grid-column-end: 3;
      grid-row-start: 1;
      grid-row-end: 1;
    }

    #viewer {
      position: relative;
      grid-column-start: 2;
      grid-column-end: 2;
      grid-row-start: 1;
      grid-row-end: 1;
    }

    .annotation {
      position: absolute;
      z-index: 1;
      margin-left: 15px;
      margin-top: 15px;
      padding: 8px;
      color: #fff;
      border-radius: .5em;
      font-size: 12px;
      background-color: rgba(0, 0, 0, 0.8);
      opacity: 1;
    }

    .annotation-number {
      z-index: 1;
      position: absolute;
      width: 30px;
      height: 30px;
      border: 2px solid #fff;
      border-radius: 50%;
      font-size: 16px;
      line-height: 30px;
      color: #fff;
      text-align: center;
      background-color: rgba(0, 0, 0, 0.8);
    }

    #number {
      position: absolute;
      z-index: -1;
    }

    .annotation p {
      word-break: break-all;
      margin-bottom: 0px;
    }

    .hidden {
      opacity: 0;
      margin: 0;
      padding: 0;
    }

    .annotation-button {
      background: red;
    }

    .master .controls {
      display: none;
    }

    .question {
      font-size: 18px;
      margin-bottom: 18px;
    }

    .questionNum {}
  </style>

  </style>
</head>

<body>
  <div id="left" class="list-group">

    <ul>
      <li class="list-group-item list-group-item-action">
        <ul class="treeUL">
          <li><span class="caret treeItem" id="item1">Техническое описание</span>
        </ul>
      </li>
      <li class="list-group-item list-group-item-action">
        <ul class="treeUL">
          <li><span class="caret">Каталог деталей</span>
            <ul class="nested list-group list-group-flush">
              <li id="item2_0" class="list-group-item list-group-item-action treeItem">Каталог</li>
              <li id="item2_1" class="list-group-item list-group-item-action treeItem">Корпус</li>
              <li id="item2_2" class="list-group-item list-group-item-action treeItem">Зубчатая передача</li>
              <li id="item2_3" class="list-group-item list-group-item-action treeItem">Двигатель</li>
              <li id="item2_4" class="list-group-item list-group-item-action treeItem">Тихоходный</li>
              <li id="item2_5" class="list-group-item list-group-item-action treeItem">Подшипники</li>
            </ul>
          </li>
        </ul>
      </li>
      <li class="list-group-item list-group-item-action">
        <ul class="treeUL">
          <li><span class="caret">Принцип работы</span>
            <ul class="nested list-group list-group-flush">
              <li id="item3_1" class="list-group-item list-group-item-action treeItem">Работа редуктора</li>
            </ul>
        </ul>
      </li>
      <li class="list-group-item list-group-item-action">
        <ul class="treeUL">
          <li><span class="caret">Руководство по разборке</span>
            <ul class="nested list-group list-group-flush">
              <li id="item4_1" class="list-group-item list-group-item-action treeItem">Разборка корпуса</li>
              <li id="item4_2" class="list-group-item list-group-item-action treeItem">Замена шестерней</li>
            </ul>
          </li>
        </ul>
      </li>
      <li class="list-group-item list-group-item-action">
        <ul class="treeUL">
          <li><span class="caret">Руководство по эксплуатации</span>
            <ul class="nested list-group list-group-flush">
              <li id="item5_1" class="list-group-item list-group-item-action treeItem">Смазываение компонентов</li>
            </ul>
          </li>
        </ul>
      </li>
      <li class="list-group-item list-group-item-action">
        <ul class="treeUL">
          <li><span class="caret treeItem" id="item6">Пройти тест</span>
          </li>
        </ul>
      </li>
    </ul>
  </div>
  <div id="viewer">
    <div id="player" style="display: none">
      <div id="playerControls">
        <span id="playBtn" class="text-primary">▶</span>
        <span id="pauseBtn" class="text-primary" style="display: none">❙❙</span>
        <input type="range" value="0" step="0.01" class="custom-range" id="customRange1" />
        <span id="time"> 0:00 / 0:00</span>
      </div>
    </div>
  </div>
  <div id="right">
    <h2>Заголовок</h2>
    <p>Редуктор это круто</p>

    <!-- <div id="testDiv">
      <h2>Тест</h2>
      <div data-role="master" data-effect="slide" id="test">
        <i>
          <p id="questionInfo" style="display:none">Ответ верный</p>
        </i>
        <div class="page">
          <div id="q1" class="card">
            <p class="card-header questionNum"><b>Вопрос №1</b></p>
            <div class="card-content p-2">
              <p class="question">Как называется зубчатое колесо с меньшим числом зубьев?</p>
              <input class="form-check-input" type="radio" name="q1_rad" id="opt1_1" data-role="radio" data-style="2"
                data-caption="Подшипник"> <br>
              <input class="form-check-input" type="radio" name="q1_rad" id="opt1_2" data-role="radio" data-style="2"
                data-caption="Колесо"> <br>
              <input class="form-check-input" type="radio" name="q1_rad" id="opt1_3" data-role="radio" data-style="2"
                data-caption="Шестерня"> <br>
              <input class="form-check-input" type="radio" name="q1_rad" id="opt1_4" data-role="radio" data-style="2"
                data-caption="Вал"> <br>
            </div>
            <div class="card-footer">
              <button class="btn btn-primary btn-sm" onclick="checkQuestionRadio(1,3)">Подтвердить</button>
            </div>
          </div>
        </div>
        <div class="page">
          <div id="q2" class="card">
            <p class="card-header"><b>Вопрос №2</b></p>
            <div class="card-content p-2">
              <img style="float:right; height:200px; margin-bottom:10px; margin-right:50px"
                src="https://www.alliedcaster.com/wp-content/uploads/2018/05/Ball_Bearing.png" />
              <p class="question">
                Подшипник какого типа показан на картинке?
              </p>
              <input class="form-check-input" type="radio" name="q2_rad" id="opt2_1" data-role="radio" data-style="2"
                data-caption="Качения"><br>
              <input class="form-check-input" type="radio" name="q2_rad" id="opt2_2" data-role="radio" data-style="2"
                data-caption="Скольжения"><br>
            </div>
            <div class="card-footer" style="clear:both">
              <button class="btn btn-primary btn-sm" onclick="checkQuestionRadio(2,1)">Подтвердить</button>
            </div>
          </div>
        </div>
        <div class="page">
          <div id="q3" class="card">
            <p class="card-header"><b>Вопрос №3</b></p>
            <div class="card-content p-2">
              <p class="question">В окне вьювера выберите верхнюю часть корпуса</p>
            </div>
          </div>
        </div>
        <div class="page">
          <div id="q4" class="card">
            <p class="card-header questionNum"><b>Вопрос №4</b></p>
            <div class="card-content p-2">
              <p class="question">Какой из перечисленных элементов не входит в конструкцию редуктора, представленного в
                окне вьювера</p>
              <input class="form-check-input" type="radio" name="q4_rad" id="opt4_1" data-role="radio" data-style="2"
                data-caption="Электродвигатель"> <br>
              <input class="form-check-input" type="radio" name="q4_rad" id="opt4_2" data-role="radio" data-style="2"
                data-caption="Подшипник"> <br>
              <input class="form-check-input" type="radio" name="q4_rad" id="opt4_3" data-role="radio" data-style="2"
                data-caption="Зубчатое колесо"> <br>
              <input class="form-check-input" type="radio" name="q4_rad" id="opt4_4" data-role="radio" data-style="2"
                data-caption="Промежуточный вал"> <br>
            </div>
            <div class="card-footer">
              <button class="btn btn-primary btn-sm" onclick="checkQuestionRadio(4,4)">Подтвердить</button>
            </div>
          </div>
        </div>
        <div class="page">
          <div id="q5" class="card">
            <p class="card-header"><b>Вопрос №5</b></p>
            <img src="http://gendocs.ru/gendocs/docs/36/35112/conv_1/file1_html_17f394a2.gif"
              style="float:right; height:200px; margin-bottom:10px; margin-right:50px" />
            <div class="card-content p-2">
              <p class="question">
                Если <i>z<sub>1</sub></i> - число зубьев ведущего звена, а <i>z<sub>2</sub></i> - ведомого, то что
                обозначает <i>u</i> в данной формуле
              </p>
              <input class="form-check-input" type="radio" name="q5_rad" id="opt5_1" data-role="radio" data-style="2"
                data-caption="Модуль"> <br>
              <input class="form-check-input" type="radio" name="q5_rad" id="opt5_2" data-role="radio" data-style="2"
                data-caption="Передаточное отношение"> <br>
              <input class="form-check-input" type="radio" name="q5_rad" id="opt5_3" data-role="radio" data-style="2"
                data-caption="Вращающий момент на ведущем валу"> <br>
              <input class="form-check-input" type="radio" name="q5_rad" id="opt5_4" data-role="radio" data-style="2"
                data-caption="Мощность на ведущем валу"> <br>
              <input class="form-check-input" type="radio" name="q5_rad" id="opt5_5" data-role="radio" data-style="2"
                data-caption="Коэффициент динамической нагрузки">
            </div>
            <div class="card-footer">
              <button class="btn btn-primary btn-sm" onclick="checkQuestionRadio(5,2)">Подтвердить</button>
            </div>
          </div>
        </div>
        <div class="page">
          <div id="q5" class="card">
            <p class="card-header"><b>Вопрос №5</b></p>
            <div class="card-content p-2">
              <p class="question">В окне вьювера выберите нижнюю часть корпуса</p>
            </div>
          </div>
        </div>
        <div class="page">
          <div class="social-box" id="final">
            <div class="header bg-cyan fg-white">
              <div class="title" id="testResult"></div>
            </div>
            <ul class="skills">
              <li>
                <div class="text-bold" id="rightAns"></div>
                <div>Правильные ответы</div>
              </li>
              <li>
                <button class="btn btn-outline-primary" onclick="restartTest()" id="btnQ1">Пройти тест снова</button>
              </li>
              <li>
                <div class="text-bold" id="wrongAns"></div>
                <div>Неправильные ответы</div>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </div> -->

    <!-- The Viewer will be instantiated here -->

    <script src="http://code.jquery.com/jquery-3.4.1.min.js"
      integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
      integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous">
    </script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
      integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous">
    </script>
    <script src="https://cdn.metroui.org.ua/v4/js/metro.min.js"></script>

    <!-- The Viewer JS -->
    <script src="https://developer.api.autodesk.com/modelderivative/v2/viewers/6.*/viewer3D.min.js"></script>
    <!-- <script src="scripts/annotationPanel.js"></script> -->
    <!-- <script src="scripts/extensions/AnnotationToolbarExt.js"></script> -->
    <script src="scripts/annotations.js"></script>
    <script src="scripts/test.js"></script>
    <script src="scripts/ietm.js"></script>
    <script src="scripts/treeView.js"></script>

    <script src="scripts/main.js"></script>
    <script>
      elements = document.querySelectorAll(".node-toggle");
      elements2 = document.querySelectorAll(".interaction-ul");
      for (let i = 0; i < elements.length; i++) {
        elements[i].id = "item" + (i + 1);
        elements[i].onclick = onNodeClick;
      }

      // Opening / closing function for ul elements
      function onNodeClick() {
        if (elements2[this.id[4] - 1].style.display == "none") {
          console.log(this.id + " is open");
        } else {
          console.log(this.id + " is closed");
        }
      }

      $('.li-hover').hover(
        function () {
          console.log(this.id + " is hover!");
        },
        function () {
          console.log(this.id + " was unhovered!");
        });

      let lastItem;
      for (const item of document.querySelectorAll(".li-hover")) {
        item.onclick = onTreeItemCLick;
      }

      // Item taken notification: selected and unselected items
      function onTreeItemCLick() {
        console.log("--------------");
        console.log(this.childNodes[0].parentElement.id + " is selected");
        if (lastItem) {
          lastItem.style.backgroundColor = "white";
          lastItem.style.color = "black";
          lastItem.childNodes[0].style.color = 'black';
          console.log(lastItem.childNodes[0].parentElement.id + " was unselected")
        }
        this.style.backgroundColor = "#428bca";
        this.style.color = "white";
        this.childNodes[0].style.color = 'white';
        lastItem = this;
      }
    </script>
</body>